!function(e,a){"object"==typeof exports&&"undefined"!=typeof module?a(exports,require("vue")):"function"==typeof define&&define.amd?define(["exports","vue"],a):a((e="undefined"!=typeof globalThis?globalThis:e||self).VueCountTo={},e.vue)}(this,(function(e,a){"use strict";let t=0;const l=["webkit","moz","ms","o"];let n,r;if("undefined"==typeof window)n=function(){},r=function(){};else{let e;n=window.requestAnimationFrame,r=window.cancelAnimationFrame;for(let a=0;a<l.length&&(!n||!r);a++)e=l[a],n=n||window[e+"RequestAnimationFrame"],r=r||window[e+"CancelAnimationFrame"]||window[e+"CancelRequestAnimationFrame"];n&&r||(n=function(e){const a=(new Date).getTime(),l=Math.max(0,16-(a-t)),n=window.setTimeout((()=>{e(a+l)}),l);return t=a+l,n},r=function(e){window.clearTimeout(e)})}var o=a.defineComponent({name:"CountTo",emits:["mountedCallback","callback"],props:{startVal:{type:Number,required:!1,default:0},endVal:{type:Number,required:!1,default:2017},duration:{type:Number,required:!1,default:3e3},autoplay:{type:Boolean,required:!1,default:!0},decimal:{type:String,required:!1,default:"."},decimals:{type:Number,required:!1,default:0,validator:e=>e>=0},separator:{type:String,required:!1,default:","},prefix:{type:String,required:!1,default:""},suffix:{type:String,required:!1,default:""},useEasing:{type:Boolean,required:!1,default:!0},easingFn:{type:Function}},setup(e,t){const l=e.easingFn||((e,a,t,l)=>t*(1-Math.pow(2,-10*e/l))*1024/1023+a),o=(a=0,t=0)=>{const l=a.toFixed(t).split(".");let n=l[0];const r=l.length>1?e.decimal+l[1]:"",o=/(\d+)(\d{3})/;if(e.separator&&(i=e.separator,isNaN(parseFloat(i))))for(;o.test(n);)n=n.replace(o,"$1"+e.separator+"$2");var i;return e.prefix+n+r+e.suffix},i=a.reactive({localStartVal:e.startVal,displayValue:o(e.startVal),printVal:null,paused:!1,localDuration:e.duration,startTime:null,timestamp:null,remaining:null,rAF:null}),u=a.computed((()=>e.startVal>e.endVal)),s=a=>{i.startTime||(i.startTime=a),i.timestamp=a;const r=a-i.startTime;i.remaining=i.localDuration-r,e.useEasing?u.value?i.printVal=i.localStartVal-l(r,0,i.localStartVal-e.endVal,i.localDuration):i.printVal=l(r,i.localStartVal,e.endVal-i.localStartVal,i.localDuration):u.value?i.printVal=i.localStartVal-(i.localStartVal-e.endVal)*(r/i.localDuration):i.printVal=i.localStartVal+(e.endVal-i.localStartVal)*(r/i.localDuration),u.value?i.printVal=i.printVal<e.endVal?e.endVal:i.printVal:i.printVal=i.printVal>e.endVal?e.endVal:i.printVal,i.displayValue=o(i.printVal),r<i.localDuration?i.rAF=n(s):t.emit("callback")},d=()=>{i.localStartVal=e.startVal,i.startTime=null,i.localDuration=e.duration,i.paused=!1,i.rAF=n(s)},p=()=>{r(i.rAF)},c=()=>{i.startTime=null,i.localDuration=+i.remaining,i.localStartVal=+i.printVal,n(s)};return a.onBeforeUnmount((()=>{r(i.rAF)})),a.onMounted((()=>{e.autoplay&&d(),t.emit("mountedCallback")})),a.watch((()=>e.startVal+e.endVal),(()=>{e.autoplay&&d()})),{countTo:i,start:d,pause:p,resume:c,reset:()=>{i.startTime=null,r(i.rAF),i.displayValue=o(e.startVal)},pauseResume:()=>{i.paused?(c(),i.paused=!1):(p(),i.paused=!0)}}}});o.render=function(e,t,l,n,r,o){return a.openBlock(),a.createBlock("span",null,a.toDisplayString(e.countTo.displayValue),1)},o.__file="packages/count-to/src/count-to.vue",o.install=e=>{e.component(o.name,o)};const i=[o];var u={install:e=>{i.forEach((a=>{e.component(a.name,a)}))}};e.CountTo=o,e.default=u,Object.defineProperty(e,"__esModule",{value:!0})}));
