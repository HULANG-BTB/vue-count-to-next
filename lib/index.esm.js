import{defineComponent as a,reactive as t,computed as e,onBeforeUnmount as l,onMounted as r,watch as n,openBlock as i,createBlock as o,toDisplayString as u}from"vue";let s=0;const d=["webkit","moz","ms","o"];let p,c;if("undefined"==typeof window)p=function(){},c=function(){};else{let a;p=window.requestAnimationFrame,c=window.cancelAnimationFrame;for(let t=0;t<d.length&&(!p||!c);t++)a=d[t],p=p||window[a+"RequestAnimationFrame"],c=c||window[a+"CancelAnimationFrame"]||window[a+"CancelRequestAnimationFrame"];p&&c||(p=function(a){const t=(new Date).getTime(),e=Math.max(0,16-(t-s)),l=window.setTimeout((()=>{a(t+e)}),e);return s=t+e,l},c=function(a){window.clearTimeout(a)})}var m=a({name:"CountTo",emits:["mountedCallback","callback"],props:{startVal:{type:Number,required:!1,default:0},endVal:{type:Number,required:!1,default:2017},duration:{type:Number,required:!1,default:3e3},autoplay:{type:Boolean,required:!1,default:!0},decimal:{type:String,required:!1,default:"."},decimals:{type:Number,required:!1,default:0,validator:a=>a>=0},separator:{type:String,required:!1,default:","},prefix:{type:String,required:!1,default:""},suffix:{type:String,required:!1,default:""},useEasing:{type:Boolean,required:!1,default:!0},easingFn:{type:Function}},setup(a,i){const o=a.easingFn||((a,t,e,l)=>e*(1-Math.pow(2,-10*a/l))*1024/1023+t),u=(t=0,e=0)=>{const l=t.toFixed(e).split(".");let r=l[0];const n=l.length>1?a.decimal+l[1]:"",i=/(\d+)(\d{3})/;if(a.separator&&(o=a.separator,isNaN(parseFloat(o))))for(;i.test(r);)r=r.replace(i,"$1"+a.separator+"$2");var o;return a.prefix+r+n+a.suffix},s=t({localStartVal:a.startVal,displayValue:u(a.startVal),printVal:null,paused:!1,localDuration:a.duration,startTime:null,timestamp:null,remaining:null,rAF:null}),d=e((()=>a.startVal>a.endVal)),m=t=>{s.startTime||(s.startTime=t),s.timestamp=t;const e=t-s.startTime;s.remaining=s.localDuration-e,a.useEasing?d.value?s.printVal=s.localStartVal-o(e,0,s.localStartVal-a.endVal,s.localDuration):s.printVal=o(e,s.localStartVal,a.endVal-s.localStartVal,s.localDuration):d.value?s.printVal=s.localStartVal-(s.localStartVal-a.endVal)*(e/s.localDuration):s.printVal=s.localStartVal+(a.endVal-s.localStartVal)*(e/s.localDuration),d.value?s.printVal=s.printVal<a.endVal?a.endVal:s.printVal:s.printVal=s.printVal>a.endVal?a.endVal:s.printVal,s.displayValue=u(s.printVal),e<s.localDuration?s.rAF=p(m):i.emit("callback")},V=()=>{s.localStartVal=a.startVal,s.startTime=null,s.localDuration=a.duration,s.paused=!1,s.rAF=p(m)},f=()=>{c(s.rAF)},w=()=>{s.startTime=null,s.localDuration=+s.remaining,s.localStartVal=+s.printVal,p(m)};return l((()=>{c(s.rAF)})),r((()=>{a.autoplay&&V(),i.emit("mountedCallback")})),n((()=>a.startVal+a.endVal),(()=>{a.autoplay&&V()})),{countTo:s,start:V,pause:f,resume:w,reset:()=>{s.startTime=null,c(s.rAF),s.displayValue=u(a.startVal)},pauseResume:()=>{s.paused?(w(),s.paused=!1):(f(),s.paused=!0)}}}});m.render=function(a,t,e,l,r,n){return i(),o("span",null,u(a.countTo.displayValue),1)},m.__file="packages/count-to/src/count-to.vue",m.install=a=>{a.component(m.name,m)};const V=[m];var f={install:a=>{V.forEach((t=>{a.component(t.name,t)}))}};export default f;export{m as CountTo};
