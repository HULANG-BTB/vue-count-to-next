import{defineComponent as e,ref as t,computed as a,onBeforeUnmount as n,onMounted as r,watch as i,openBlock as l,createBlock as u,toDisplayString as o}from"vue";var d=e({name:"CountTo",emits:["mountedCallback","callback"],props:{startVal:{type:Number,required:!1,default:0},endVal:{type:Number,required:!1,default:2017},duration:{type:Number,required:!1,default:3e3},autoplay:{type:Boolean,required:!1,default:!0},decimal:{type:String,required:!1,default:"."},decimals:{type:Number,required:!1,default:0,validator:e=>e>=0},separator:{type:String,required:!1,default:","},prefix:{type:String,required:!1,default:""},suffix:{type:String,required:!1,default:""},useEasing:{type:Boolean,required:!1,default:!0},easingFn:{type:Object,required:!1,default:void 0}},setup(e,l){const u=e.easingFn||((e,t,a,n)=>a*(1-Math.pow(2,-10*e/n))*1024/1023+t),o=(t=0,a=0)=>{const n=t.toFixed(a).split(".");let r=n[0];const i=n.length>1?e.decimal+n[1]:"",l=/(\d+)(\d{3})/;if(e.separator&&(u=e.separator,isNaN(parseFloat(u))))for(;l.test(r);)r=r.replace(l,"$1"+e.separator+"$2");var u;return e.prefix+r+i+e.suffix},d=t(o(e.startVal));let s=0,m=0,c=e.duration||3e3,p=e.startVal||0,f=0,V=!1,w=0;const{requestAnimationFrame:y,cancelAnimationFrame:q}=function(){let e=0;const t=["webkit","moz","ms","o"];let a,n;if("undefined"==typeof window)a=function(){return 0},n=function(){};else{let r;a=window.requestAnimationFrame,n=window.cancelAnimationFrame;for(let e=0;e<t.length&&(!a||!n);e++)r=t[e],a=a||window[r+"RequestAnimationFrame"],n=n||window[r+"CancelAnimationFrame"]||window[r+"CancelRequestAnimationFrame"];a&&n||(a=function(t){const a=(new Date).getTime(),n=Math.max(0,16-(a-e)),r=window.setTimeout((()=>{t(a+n)}),n);return e=a+n,r},n=function(e){window.clearTimeout(e)})}return{requestAnimationFrame:a,cancelAnimationFrame:n}}(),F=a((()=>e.startVal>e.endVal)),g=t=>{s||(s=t);const a=t-s;m=c-a,f=e.useEasing?F.value?p-u(a,0,p-e.endVal,c):u(a,p,e.endVal-p,c):F.value?p-(p-e.endVal)*(a/c):p+(e.endVal-p)*(a/c),f=F.value?f<e.endVal?e.endVal:f:f>e.endVal?e.endVal:f,d.value=o(f),a<c?w=y(g):l.emit("callback")},v=()=>{p=e.startVal,s=0,c=e.duration,V=!1,w=y(g)},b=()=>{q(w)},A=()=>{s=0,c=+m,p=+f,y(g)};return n((()=>{q(w)})),r((()=>{e.autoplay&&v(),l.emit("mountedCallback")})),i((()=>e.startVal+e.endVal),(()=>{e.autoplay&&v()})),{displayValue:d,start:v,pause:b,resume:A,reset:()=>{s=0,q(w),d.value=o(e.startVal)},pauseResume:()=>{V?(A(),V=!1):(b(),V=!0)}}}});d.render=function(e,t,a,n,r,i){return l(),u("span",null,o(e.displayValue),1)},d.__file="packages/count-to/src/count-to.vue",d.install=e=>{e.component(d.name,d)};const s=[d];var m={install:function(e){s.forEach((t=>{e.component(t.name,t)}))}};export default m;export{d as CountTo};
